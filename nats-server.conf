# NATS Server Configuration
# This configuration supports credentials and provides secure defaults

# Server name and cluster configuration
server_name: "nats-server"
server_tags: ["production"]

# Network configuration
port: 4222
http_port: 8222
http: "0.0.0.0:8222"

# Logging configuration
logtime: true
debug: false
trace: false
log_file: "/var/log/nats/nats-server.log"

# JetStream configuration (optional)
jetstream {
    store_dir: "/var/lib/nats/jetstream"
    max_mem: 1GB
    max_file: 10GB
}

# Authentication configuration
# Uncomment and configure one of the authentication methods below

# Option 1: Username/Password authentication
authorization {
    user: "admin"
    password: "password123"
    timeout: 2.0
}

# Option 2: Token-based authentication
# authorization {
#     token: "your-secret-token"
#     timeout: 2.0
# }

# Option 3: Credentials file (recommended for production)
# authorization {
#     users = [
#         {
#             nkey: "UCNGL4W5QX66CFQ5FABXWFJTQYYA7XK3N6VK7K3N6VK7K3N6VK7"
#         }
#     ]
# }

# Option 4: JWT-based authentication
# resolver {
#     type: full
#     dir: "/etc/nats/jwt"
# }

# TLS configuration (uncomment for production)
# tls {
#     cert_file: "/etc/nats/certs/server-cert.pem"
#     key_file: "/etc/nats/certs/server-key.pem"
#     ca_file: "/etc/nats/certs/ca.pem"
#     verify: true
# }

# Cluster configuration (for clustering)
# cluster {
#     port: 6222
#     listen: 0.0.0.0:6222
#     name: "nats-cluster"
#     authorization {
#         user: "cluster_user"
#         password: "cluster_password"
#         timeout: 2.0
#     }
#     routes = [
#         "nats://cluster_user:cluster_password@nats-server-1:6222"
#     ]
# }

# Monitoring and metrics
http: "0.0.0.0:8222"
server_name: "nats-server"

# Limits and timeouts
max_connections: 65536
max_subscriptions: 0
max_payload: 1048576
max_control_line: 4096
ping_interval: 120s
ping_max: 2

# Write deadline
write_deadline: "2s"

# Client connection limits
# Note: These fields are not supported in NATS server v2.10.7
# max_connections_per_client: 1
# max_subscriptions_per_client: 0
# max_payload_per_client: 0
# max_control_line_per_client: 0
